#  [109-2] Web Programming Final

# (Group 60) 知識家 2.0

## Demo 影片連結

https://youtu.be/wjPQ7WFB9ik

## 服務描述

有鑑於 *Yahoo 奇摩知識家* 於 2021 年不再提供服務，我們想要提供一相似服務，專為網路使用者提供一使用者友善的問答平台，延續**能者為師**的優良傳統。
在此服務中，我們提供了以下幾項功能:
- 會員功能
- 發問功能
- 留言功能
- 最佳解答功能
- 搜尋功能
- 交易系統
- 經驗值系統

## Deployed 連結

https://answers2.herokuapp.com/

## 使用/操作方式

### 客戶端

於客戶端大致可以使用以下 7 種功能進行此服務。

#### 會員功能

1. 註冊
    - 帳號(註冊後仍需經認證才可啟用此帳號)
    - 姓名
    - 生日
    - 密碼
2. 登入
    - 本地資料存儲
    - 為求安全性，不儲存密碼等私密資料
3. 使用者設定
    - 可以透過使用者設定修改自我介紹(預設為無內容)
    - 會員可以透過點擊問題或留言的使用者名稱查看該會員簡介

#### 發問功能

登入進入首頁後，可以點擊由上方的
![](https://i.imgur.com/PhQJP2c.png)
按鈕進行發問。
其中，需要填寫以下必填欄位。
 - 主旨
 - 種類
 - 內容

#### 留言功能

在首頁、我的問題和我的回答頁面中，均可以看到許多問題區塊。在點選顯示更多之後，可以看到其他人的所有留言和留言區。於留言區輸入即可回答問題。

#### 最佳留言功能

發問者可以於我的問題查看所有自己發的問題和留言。當發文者認為該留言為最佳留言，即可點選最佳留言將此留言設定為最佳留言(不可逆)。設為最佳留言之後，所有人均可以透過
![](https://i.imgur.com/7Fy16R8.png)
看到此留言為最佳留言。

#### 搜尋功能

使用者可以在首頁的
![](https://i.imgur.com/2UbgZrc.png)
輸入搜尋內容查看相關問題。

#### 交易系統

1. 初始金額
    - 在創建帳號時，每人均可獲得 100 ![](https://i.imgur.com/yOAitQz.png)
2. 交易金額
    - 使用者發問時，系統會向其收取 5 ![](https://i.imgur.com/YhxsF0z.png)
    - 為鼓勵使用者選出最佳留言者，在選出最佳留言者後，該最佳留言者得到 3 ![](https://i.imgur.com/57iOoiH.png)，並退還 2 ![](https://i.imgur.com/Nt2lQUD.png)給使用者。

#### 經驗值系統

1. 初始經驗值
    - 創立帳號後，初始經驗值為 0 xp
2. 等級制
    - 等級為 $\log xp+10$ 無條件捨去
3. 增加經驗值
    - 發問增加 5 xp
    - 留言增加 1 xp
    - 最佳留言增加 30 xp

### 伺服器端

本服務的後端提供Restful API給前端使用，根據功能類型大致可分為四個區塊

1. 登入註冊驗證
    - 帳號註冊
    接收前端傳來的帳號與密碼，驗證此帳號是否能夠登入
    - 帳號登入
    接收前端傳來的帳號、密碼、生日和名字，並驗證此帳號是否已註冊過，若符合註冊規定，將相關資料與hash以後的密碼存入資料庫，並傳送認證郵件給註冊的帳號，郵件包含一個由帳號加密碼hash過的字串
    - 帳號驗證
    接收一個字串，從資料庫中找到對應到這則字串的使用者並將其帳號啟用
    
3. 問題取得與新增
    - 新增問題
    接收前端傳來的使用者與問題相關資料，驗證使用者存在並在資料庫中建立新的問題文件
    - 用頁數取得問題
    接收前端傳來的頁數p，回傳以發佈時間降序排序第10*(p-1)到10*p-1的問題
    - 用使用者帳號取得問題
    接收從前端傳來的使用者帳號，驗證使用者存在並回傳給使用者發過的問題
    - 用關鍵字取得問題
    接收從前端傳來的關鍵字，回傳任何含有該關鍵字的問題
    - 設置問題的最佳解答
    接收前端傳來的問題與留言id，驗證留言與問題皆存在並將該留言設置為該問題的最佳解答
5. 留言取得與新增
    - 新增留言
    接收前端傳來的使用者與留言相關資料，驗證使用者存在並在資料庫中建立新的留言文件
    - 用使用者帳號取得留言
    接收從前端傳來的使用者帳號，驗證使用者存在並回傳給使用者發佈過的留言及對應的問題
7. 使用者資訊更新
    - 更新使用者簡介
    接收從前端傳來的使用者帳號與自我簡介，驗證使用者存在並更新資料庫中的使用者簡介
    - 更新帳號密碼
    接收從前端傳來的使用者帳號、舊密碼與新密碼，用舊密碼驗證使用者並更新資料庫中帳號密碼為新密碼

## Github link

https://github.com/ivan0416/WP-project

## 使用與參考之框架、模組、原始碼

### 前端

- React.js

### 後端

- Node.js
- express
- mongoose

## 使用之第三方套件、框架、程式碼

### 前端

- Antd

### 後端

- dotenv-defaults
- crypto
- Nodemailer
- nodemon
- cors

## 專題製作心得

### 黃啟宏

之前做專題我通常都是寫後端，這次終於有機會來完成前端，發現原來前端的設計比想像中難很多。以前都會覺得前端只是單純排版，沒有什麼挑戰性，但其實不管是畫面的設計、風格的選擇到物件與使用者的互動、前後端的串接都是需要經過一番思考的。最重調的是在小組討論時真的很難做到完全分工，常常有問題都需要組員嗎一起去把它解掉，我認為我在這部分需要更多的學習與經驗。

### 黃勖哲

Yahoo奇摩知識+的服務從小就是我們問問題的好去處，如今平台方已經不提供服務了，於是組員們提出了復刻知識+的想法。我們盡可能做出既有的功能，並且融入我們自己設計出的風格。這次專案進行的過程，不只是讓我們練習課堂中學到的技術，更讓我們有機會去觀察生活中常使用的網頁操作邏輯或是細節並加以模仿。整題而言這次的專案讓我們每個人都學到了不少東西。

### 鄭宇翔

這個專題是我第一次實際去開發一個服務的後端，實際開發起來比想像中的難上許多，因為初期就要把資料庫Schema定好，所以必須先想好這個服務會用到哪些API，根據這些API使用頻率與對速度的要求再去設計符合需求Schema，雖然開發之前已經盡量做到這點，但是實際進行後還是會碰到需要修改API需求與資料庫Schema的情況，幸好最終有順利完成，也讓我對後端開發的模式更了解了一些。

## 如何在 localhost 安裝與測試之詳細步驟

1. 切換至該層資料夾(/wp1092/final/WP-project/)
2. *npm install*
3. 前後端開啟指令(均在該層資料夾即可)
    - 前端
        *yarn start*
    - 後端
        *yarn server*

## 每位組員之負責項目

### 黃啟宏

1. 前端設計
    - 登入頁面
    - 使用者設定
    - 表單設計
2. 串聯後端功能
    - 會員功能
    - 發問功能
    - 交易系統
    - 經驗值系統

### 黃勖哲

1. 前端設計
    - 首頁設計
    - 問題框設計
    - 留言設計
2. 串聯後端功能
    - 發問功能
    - 留言功能
    - 最佳留言功能
    - 搜尋功能

### 鄭宇翔

1. 後端開發、資料庫架設
    - 設計資料庫Schema
    - 建立與MongoDB連線
    - 開發API

2. 網頁部屬
    - 部署服務至Heroku